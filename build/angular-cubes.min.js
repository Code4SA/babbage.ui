/*! angular-cubes 2015-06-29 */
function asArray(a){return objs=a?a:[],angular.isArray(objs)?objs:[objs]}var makeSignal=function(a){return"cubes_"+Math.random().toString(36).replace(/[^a-z]+/g,"")};String.prototype.endsWith||(String.prototype.endsWith=function(a,b){var c=this.toString();(void 0===b||b>c.length)&&(b=c.length),b-=a.length;var d=c.indexOf(a,b);return-1!==d&&d===b});var ngCubes=angular.module("ngCubes",["ngCubes.templates"]),numberFormat=d3.format("0,000");ngCubes.filter("numeric",function(){return function(a){var b=parseFloat(a);return isNaN(b)?"-":numberFormat(Math.round(b))}}),ngCubes.factory("cubesApi",["$http","$q",function(a,b){var c={},d=function(a,b,c){var d=a.slice(),d=d.endsWith("/")?d.slice(0,d.length-1):d,d=d+"/cube/"+b+"/"+c;return d},e=function(b){return angular.isDefined(c[b])||(c[b]=a.get(b)),c[b]},f=function(a,b){return e(d(a,b,"model"))},g=function(a,b,c){return e(d(a,b,"members/"+c))},h=function(){c={}};return{getUrl:d,getModel:f,getDimensionMembers:g,flush:h}}]),ngCubes.directive("cubes",["$http","$rootScope","$location","cubesApi",function(a,b,c,d){return{restrict:"E",transclude:!0,scope:{slicer:"@",cube:"@",state:"="},templateUrl:"angular-cubes-templates/cubes.html",controller:["$scope",function(a){var e=this,f=angular.extend({},a.state||{},c.search());e.dataUpdate=makeSignal(),e.modelUpdate=makeSignal(),e.queryModel={},e.init=function(c){e.queryModel=c,d.getModel(a.slicer,a.cube).then(function(a){b.$broadcast(e.modelUpdate,a.data,f)})},e.getState=function(){return f},e.setState=function(a){c.search(a)},e.getApiUrl=function(b){return d.getUrl(a.slicer,a.cube,b)},e.getDimensionMembers=function(b){return d.getDimensionMembers(a.slicer,a.cube,b)},e.getSorts=function(){var a=[],b=f.order||"",b=asArray(b.split(","));for(var c in b){var d=b[c].split(":"),e={};e.ref=d[0],e.direction=d[1]||null,a.push(e)}return a},e.getSort=function(a){var b=e.getSorts();for(var c in b)if(b[c].ref==a)return b[c];return{ref:a}},e.pushSort=function(a,b){var c=e.getSorts().filter(function(b){return b.ref!=a});c.unshift({ref:a,direction:b}),f.order=e.mergeSorts(c),e.setState(f)},e.removeSorts=function(a){var b=e.getSorts().filter(function(b){return b.ref!=a});return e.mergeSorts(b)},e.mergeSorts=function(a){var b=[];a=asArray(a);for(var c in a){var d=a[c];angular.isObject(d)&&d.ref.length&&(d.direction=d.direction||"asc",d=d.ref+":"+d.direction,b.push(d))}return b.join(",")},e.getQuery=function(){var a={drilldown:[],aggregates:[],cut:f.cut||[],page:f.page||0,pagesize:f.pagesize||30,order:e.getSorts()};return a},e.queryParams=function(a){a.order=e.mergeSorts(a.order);for(var b in a)angular.isArray(a[b])&&(-1!=["order","fields"].indexOf(b)?a[b]=a[b].join(","):a[b]=a[b].join("|")),a[b]=a[b]+"",a[b].length||delete a[b];return{params:a}}}]}}]),ngCubes.directive("cubesPager",["$timeout","$location",function(a,b){return{restrict:"E",scope:{context:"="},templateUrl:"angular-cubes-templates/pager.html",link:function(a,c,d,e){a.showPager=!1,a.hasPrev=!1,a.hasNext=!1,a.pages=[],a.cur=0,a.num=0,a.$watch("context",function(b){if(a.context&&!(a.context.total<=a.context.pagesize)){a.current=parseInt(a.context.page,10)||0,a.num=Math.ceil(a.context.total/a.context.pagesize);var c=[],d=a.num,e=3,f=a.current-e,g=a.current+e;0>f&&(f=0,g=Math.min(2*e+1,d)),g>d&&(g=d,f=Math.max(1,d-2*e+1));for(var h=f;g>=h;h++)c.push({page:h,current:h==a.current});a.hasPrev=a.current>0,a.hasNext=a.current<d,a.showPager=d>1,a.pages=c}}),a.setPage=function(c){if(c>=0&&c<=a.num){var d=b.search();d.page=c,b.search(d)}}}}}]);var VAL_KEY="@@@@",POS_KEY="!@!@";ngCubes.directive("cubesCrosstab",["$rootScope","$http",function(a,b){return{restrict:"EA",require:"^cubes",scope:{drilldown:"="},templateUrl:"angular-cubes-templates/crosstab.html",link:function(c,d,e,f){c.queryLoaded=!1,c.columns=[],c.rows=[],c.table=[];var g=function(a,c){c.rows=asArray(c.rows),c.columns=asArray(c.columns),c.aggregates=asArray(c.aggregates);var d=f.getQuery();d.aggregates=d.aggregates.concat(c.aggregates),d.aggregates.length||(d.aggregates=i(a)),d.drilldown=d.drilldown.concat(c.rows),d.drilldown=d.drilldown.concat(c.columns),d.page=0,d.pagesize=1e4*d.pagesize,d.order=asArray(d.order);var e=c.rows.concat(c.columns),g=e.concat(d.aggregates);for(var j in e){var k=e[j];f.getSort(k).direction||-1==d.order.indexOf(k)&&d.order.push({ref:k})}var l=[];for(var j in d.order){var m=d.order[j];-1!=g.indexOf(m.ref)&&l.push(m)}d.order=l;var n=b.get(f.getApiUrl("aggregate"),f.queryParams(d));n.then(function(b){h(b.data,d,a,c)})},h=function(a,b,d,e){e.rows=asArray(e.rows),e.columns=asArray(e.columns);var f={};for(var g in d.dimensions){var h=d.dimensions[g];for(var i in h.levels){var j=h.levels[i];for(var k in j.attributes){var l=j.attributes[k],m=-1!=l.ref.indexOf("."),n=m?h.name+"."+j.key:l.ref;f[l.ref]=n}}}var o=d.aggregates.filter(function(b){return-1!=a.aggregates.indexOf(b.ref)}),p={},q=[],r=[],s=[],t=[],u=[];for(var g in a.cells){var v=function(a){return x[a]},w=function(a){return x[f[a]]+x[a]},x=a.cells[g],y=e.rows.map(v),z=e.rows.map(w).join(VAL_KEY),A=e.columns.map(v),B=e.columns.map(w);for(var k in o){var C=o[k],D=C.label||C.name,E=A.concat([D]);column_set=B.concat([D]).join(VAL_KEY),-1==t.indexOf(z)&&(t.push(z),y.key=z,r.push(y)),-1==u.indexOf(column_set)&&(u.push(column_set),s.push(E));var n=[z,column_set].join(POS_KEY);p[n]=x[C.name]}}for(var g in t){var F=t[g],G=[];for(var i in u){var H=u[i],n=[F,H].join(POS_KEY);G.push(p[n]||a.aggregates.map(function(a){return void 0}))}q.push(G)}c.rows=r,c.columns=s,c.table=q,c.queryLoaded=!0};a.$on(f.modelUpdate,function(a,b,c){g(b,c)});var i=function(a){var b=[];for(var c in a.aggregates){var d=a.aggregates[c];b.push(d.ref)}return b};f.init({columns:{label:"Columns",addLabel:"add column",types:["attributes"],defaults:[],sortId:0,multiple:!0},rows:{label:"Rows",addLabel:"add row",types:["attributes"],defaults:[],sortId:1,multiple:!0},aggregates:{label:"Values",addLabel:"add value",types:["aggregates"],defaults:i,sortId:2,multiple:!0}})}}}]),ngCubes.directive("cubesFacts",["$rootScope","$http","$q","slugifyFilter",function(a,b,c,d){return{restrict:"EA",require:"^cubes",scope:{drilldown:"="},templateUrl:"angular-cubes-templates/facts.html",link:function(e,f,g,h){var i={};e.page=0,e.data=[],e.columns=[],e.pagerCtx={},e.getSort=h.getSort,e.pushSort=h.pushSort;var j=function(a,d){var e=h.getQuery();e.fields=asArray(d.fields),0==e.fields.length&&(e.fields=l(a));var f=[];for(var g in e.order){var i=e.order[g];-1!=e.fields.indexOf(i.ref)&&f.push(i)}e.order=f;var j=angular.copy(e);j.drilldown=j.fields=[],j.page=0;var m=b.get(h.getApiUrl("facts"),h.queryParams(e)),n=b.get(h.getApiUrl("aggregate"),h.queryParams(j));c.all([m,n]).then(function(a){k(a[0].data,a[1].data,e,d)})},k=function(a,b,c,d){if(!a.length)return e.columns=[],e.data=[],void(e.pagerCtx={});var f=a[0],g=[];for(var h in f)g.push(h);g=g.sort();var j=[],k=null,l=0;for(var m in g){var n=g[m],o=i[n],p=o.dimension?o.dimension:o;o.ref=n,p.name==k?(j[l].span+=1,o.span=0):(o.span=1,o.label=o.label||o.name,o.header=p.label||p.name,o.hide=o.hideLabel,k=p.name,l=j.length),j.push(o)}e.columns=j,e.data=a,e.pagerCtx={page:c.page,pagesize:c.pagesize,total:b.summary.fact_count}},l=function(a){var b=[];for(var c in a.measures){var d=a.measures[c];b.push(d.ref)}for(var c in a.dimensions){var e=a.dimensions[c];for(var f in e.levels){var g=e.levels[f];for(var h in g.attributes){var i=g.attributes[h];i.name==g.label_attribute&&b.push(i.ref)}}}return b};a.$on(h.modelUpdate,function(a,b,c){for(var e in b.measures){var f=b.measures[e];f.numeric=!0,f.hideLabel=!0,i[f.ref]=f}for(var g in b.dimensions){var h=b.dimensions[g];for(var k in h.levels){var l=h.levels[k];for(var m in l.attributes){var n=l.attributes[m];n.dimension=h,n.hideLabel=d(n.label)==d(h.label),i[n.ref]=n}}}j(b,c)}),h.init({fields:{label:"Columns",addLabel:"add column",types:["attributes","measures"],defaults:l,sortId:0,multiple:!0}})}}}]),ngCubesCategoryColors=["#CF3D1E","#F15623","#F68B1F","#FFC60B","#DFCE21","#BCD631","#95C93D","#48B85C","#00833D","#00B48D","#60C4B1","#27C4F4","#478DCB","#3E67B1","#4251A3","#59449B","#6E3F7C","#6A246D","#8A4873","#EB0080","#EF58A0","#C05A89"],ngCubesColorScale=d3.scale.ordinal().range(ngCubesCategoryColors),ngCubes.directive("cubesTreemap",["$rootScope","$http","$document",function(a,b,c){return{restrict:"EA",require:"^cubes",scope:{drilldown:"="},templateUrl:"angular-cubes-templates/treemap.html",link:function(c,d,e,f){function g(){this.style("left",function(a){return a.x+"px"}).style("top",function(a){return a.y+"px"}).style("width",function(a){return Math.max(0,a.dx-1)+"px"}).style("height",function(a){return Math.max(0,a.dy-1)+"px"})}var h=null,i=null;c.queryLoaded=!1,c.cutoffWarning=!1,c.columns=[],c.rows=[],c.table=[];var j=function(a,e){var g=asArray(e.tile)[0],j=asArray(e.area)[0],j=j?[j]:l(a),m=f.getQuery();if(m.aggregates=j,g){m.drilldown=[g];var n=[];for(var o in m.order){var p=m.order[o];-1!=[g,j].indexOf(p.ref)&&n.push(p)}n.length||(n=[{ref:j,direction:"desc"}]),m.order=n,m.page=0,m.pagesize=50,c.cutoffWarning=!1;var q=b.get(f.getApiUrl("aggregate"),f.queryParams(m)),r=d.querySelectorAll(".treemap-cubes")[0],s=r.clientWidth,t=.6*s;h=d3.layout.treemap().size([s,t]).sticky(!0).sort(function(a,b){return a[j]-b[j]}).value(function(a){return a[j]}),i=d3.select(r).append("div").style("position","relative").style("width",s+"px").style("height",t+"px"),q.then(function(b){k(b.data,m,a,e)})}},k=function(a,b,d,e){var f=asArray(e.tile)[0],j=asArray(e.area)[0],j=j?[j]:l(d),k={children:[]};for(var m in a.cells){var n=a.cells[m];n._area_fmt=numberFormat(Math.round(n[j])),n._name=n[f],n._color=ngCubesColorScale(m),n._percentage=n[j]/Math.max(a.summary[j],1),k.children.push(n)}i.datum(k).selectAll(".node").data(h.nodes).enter().append("a").attr("href",function(a){return a.href}).attr("class","node").call(g).style("background","#fff").html(function(a){return a._percentage<.02?"":a.children?null:'<span class="amount">'+a._area_fmt+"</span>"+a._name}).on("mouseover",function(a){d3.select(this).transition().duration(200).style({background:d3.rgb(a._color).darker()})}).on("mouseout",function(a){d3.select(this).transition().duration(500).style({background:a._color})}).transition().duration(500).delay(function(a,b){return Math.min(30*b,1500)}).style("background",function(a){return a._color});c.queryLoaded=!0,c.cutoffWarning=a.total_cell_count>b.pagesize,c.cutoff=b.pagesize};a.$on(f.modelUpdate,function(a,b,c){j(b,c)});var l=function(a){for(var b in a.aggregates){var c=a.aggregates[b];if(c.measure)return[c.ref]}return[]};f.init({tile:{label:"Tiles",addLabel:"set breakdown",types:["attributes"],defaults:[],sortId:0,multiple:!1},area:{label:"Area",addLabel:"set area",types:["aggregates"],defaults:l,sortId:1,multiple:!1}})}}}]),ngCubes.directive("cubesPanel",["$rootScope","slugifyFilter",function(a,b){return{restrict:"EA",require:"^cubes",scope:{},templateUrl:"angular-cubes-templates/panel.html",link:function(c,d,e,f){c.state={},c.axes=[],c.filterAttributes=[],c.filters=[],c.getSort=f.getSort,c.pushSort=f.pushSort;var g=function(){f.setState(c.state)};c.add=function(a,b){-1==a.selected.indexOf(b)&&(a.multiple?a.selected.push(b):(a.selected.length&&(c.state.order=f.removeSorts(a.selected[0])),a.selected=[b]),c.state[a.name]=a.selected,g())},c.remove=function(a,b){var d=a.selected.indexOf(b);-1!=d&&(a.selected.splice(d,1),c.state[a.name]=a.selected,c.state.order=f.removeSorts(b),g())};var h=function(a){var c=[];for(var d in a.dimensions){var e=a.dimensions[d];for(var f in e.levels){var g=e.levels[f];for(var h in g.attributes){var i=angular.copy(g.attributes[h]);i.type="attributes",b(e.label)!=b(i.label)&&(i.subLabel=""+i.label),i.sortKey="0"+e.label+i.label,i.label=e.label,i.cardinality=g.cardinality,c.push(i)}}}for(var h in a.aggregates){var j=a.aggregates[h];j.type="aggregates",j.sortKey="1"+j.name,c.push(j)}for(var k in a.measures){var l=a.measures[k];l.type="measures",l.sortKey="2"+l.name,c.push(l)}return c},i=function(a,b){return a.label.localeCompare(b.label)},j=function(a,b,c){var d=[];if(!f.queryModel)return[];for(var e in f.queryModel){var g=f.queryModel[e];g.name=e,g.sortId=g.sortId||1,g.available=[],g.active=[],g.selected=asArray(a[e]),g.selected.length||(angular.isFunction(g.defaults)?g.selected=g.defaults(b):g.selected=asArray(g.defaults)),g.available=g.available.sort(i),g.active=g.active.sort(i);for(var h in c){var j=c[h];-1!=g.selected.indexOf(j.ref)?g.active.push(j):-1!=g.types.indexOf(j.type)&&g.available.push(j)}d.push(g)}return d.sort(function(a,b){return a.sortId-b.sortId})},k=function(a){var b=[];for(var c in a){var d=a[c];"attributes"==d.type&&"high"!=d.cardinality&&b.push(d)}return b.sort(i)},l=function(a){return a.split(".",1)},m=function(a,b){return b.data.data.map(function(b){return b[a]})},n=function(a){for(var b in c.filterAttributes){var d=c.filterAttributes[b];if(d.ref==a)return d}},o=function(a){var b=[],c=asArray(a.cut);for(var d in c){var e=c[d];if(-1!=e.indexOf(":")){var g=e.split(":",1)[0],h=e.slice(g.length+1).split(";");for(var i in h){var j={ref:g,attr:n(g),value:h[i],values:[],editMode:!1};f.getDimensionMembers(l(g)).then(function(a){j.values=m(g,a)}),b.push(j)}}}return b};c.addFilter=function(a){f.getDimensionMembers(l(a.ref)).then(function(b){c.filters.push({ref:a.ref,attr:a,editMode:!0,values:m(a.ref,b)})})},c.removeFilter=function(a){var b=c.filters.indexOf(a);-1!=b&&(c.filters.splice(b,1),c.updateFilters())},c.toggleEditFilter=function(a){a.editMode=!a.editMode},c.setFilter=function(a,b){c.toggleEditFilter(a),c.updateFilters()},c.updateFilters=function(){var a={};for(var b in c.filters){var d=c.filters[b];angular.isUndefined(a[d.ref])&&(a[d.ref]=[]),a[d.ref].push(d.value)}var e=[];for(var f in a){var h=a[f],i=h.join(";");cut=f+":"+i,e.push(cut)}c.state.page=0,c.state.cut=e,g()},a.$on(f.modelUpdate,function(a,b,d){c.state=d;var e=h(b);c.axes=j(d,b,e),c.filterAttributes=k(e),c.filters=o(d)})}}}]),ngCubes.directive("cubesWorkspace",["$location",function(a){return{restrict:"EA",scope:{slicer:"@",cube:"@"},templateUrl:"angular-cubes-templates/workspace.html",link:function(b,c,d){b.state={},b.view=a.search().view||"facts",b.setView=function(b){var c=a.search();c.view=b,a.search(c)}}}}]),angular.module("ngCubes.templates",["angular-cubes-templates/crosstab.html","angular-cubes-templates/cubes.html","angular-cubes-templates/facts.html","angular-cubes-templates/pager.html","angular-cubes-templates/panel.html","angular-cubes-templates/treemap.html","angular-cubes-templates/workspace.html"]),angular.module("angular-cubes-templates/crosstab.html",[]).run(["$templateCache",function(a){a.put("angular-cubes-templates/crosstab.html",'<div class="table-cubes" ng-show="rows.length">\n  <table class="table table-bordered table-condensed">\n    <thead>\n      <tr ng-repeat="x in columns[0]">\n        <th ng-repeat="r in rows[0]"></th>\n        <th ng-repeat="c in columns">\n          {{c[$parent.$index]}}\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="row in rows">\n        <th ng-repeat="r in row">\n          {{r}}\n        </th>\n        <td ng-repeat="val in table[$index] track by $index" class="numeric">\n          {{val | numeric}}\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n\n<div class="table-cubes" ng-hide="rows.length || !queryLoaded">\n  <div class="alert alert-info">\n    <strong>You have not selected any data.</strong> Please choose a set of rows \n    and columns to generate a cross-table.\n  </div>\n</div>\n')}]),angular.module("angular-cubes-templates/cubes.html",[]).run(["$templateCache",function(a){a.put("angular-cubes-templates/cubes.html",'<div class="cubes-frame" ng-transclude>\n</div>\n')}]),angular.module("angular-cubes-templates/facts.html",[]).run(["$templateCache",function(a){a.put("angular-cubes-templates/facts.html",'<div class="table-cubes" ng-show="data">\n  <table class="table table-bordered table-striped table-condensed">\n    <thead>\n      <tr>\n        <th ng-repeat-start="c in columns" class="title">\n          {{ c.header }}\n          <span class="sublabel" ng-hide="c.hide">{{ c.label }}</span>\n        </th>\n        <th ng-repeat-end class="operations" ng-switch="getSort(c.ref).direction">\n          <span ng-switch-when="desc" ng-click="pushSort(c.ref, \'asc\')" class="ng-link">\n            <i class="fa fa-sort-desc"></i>\n          </span>\n          <span ng-switch-when="asc" ng-click="pushSort(c.ref, \'desc\')" class="ng-link">\n            <i class="fa fa-sort-asc"></i>\n          </span>\n          <span ng-switch-default ng-click="pushSort(c.ref, \'asc\')" class="ng-link">\n            <i class="fa fa-sort"></i>\n          </span>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="row in data">\n        <td ng-repeat="c in columns" ng-class="{\'numeric\': c.numeric}" class="simple"\n          colspan="2">\n          <span ng-if="c.numeric">\n            {{ row[c.ref] | numeric }}\n          </span>\n          <span ng-if="!c.numeric">\n            {{ row[c.ref] }}\n          </span>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n<cubes-pager context="pagerCtx"></cubes-pager>\n')}]),angular.module("angular-cubes-templates/pager.html",[]).run(["$templateCache",function(a){a.put("angular-cubes-templates/pager.html",'<ul ng-show="showPager" class="pagination pagination-sm">\n  <li ng-class="{\'disabled\': !hasPrev}">\n    <a class="ng-link" ng-click="setPage(current - 1)">&laquo;</a>\n  </li>\n  <li ng-repeat="page in pages" ng-class="{\'active\': page.current}">\n    <a class="ng-link" ng-click="setPage(page.page)">{{page.page + 1}}</a>\n  </li>\n  <li ng-class="{\'disabled\': !hasNext}">\n    <a class="ng-link" ng-click="setPage(current + 1)">&raquo;</a>\n  </li>\n</ul>\n')}]),angular.module("angular-cubes-templates/panel.html",[]).run(["$templateCache",function(a){a.put("angular-cubes-templates/panel.html",'<div class="panel panel-default" ng-repeat="axis in axes">\n  <div class="panel-heading">\n    <strong>{{axis.label}}</strong>\n\n    <div class="btn-group" dropdown ng-show="axis.available.length">\n      &mdash;\n      <a dropdown-toggle class="ng-link">{{axis.addLabel}}</a>\n      <ul class="dropdown-menu" role="menu">\n        <li ng-repeat="opt in axis.available">\n          <a ng-click="add(axis, opt.ref)">\n            <strong>{{opt.label}}</strong>\n            {{opt.subLabel}}\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <table class="table">\n    <tr ng-repeat="opt in axis.active">\n      <td colspan="2">\n        <div class="pull-right">\n          <span ng-switch="getSort(opt.ref).direction">\n            <a ng-switch-when="desc" ng-click="pushSort(opt.ref, \'asc\')" class="ng-link ng-icon">\n              <i class="fa fa-sort-amount-desc"></i></a>\n            <a ng-switch-when="asc" ng-click="pushSort(opt.ref, \'desc\')" class="ng-link ng-icon">\n              <i class="fa fa-sort-amount-asc"></i></a>\n            <a ng-switch-default ng-click="pushSort(opt.ref, \'asc\')" class="ng-link ng-icon">\n              <i class="fa fa-sort-amount-desc"></i></a>\n          </span>\n          <a ng-click="remove(axis, opt.ref)" ng-show="axis.multiple" class="ng-link ng-icon">\n            <i class="fa fa-times"></i></a>\n        </div>\n        <strong>{{opt.label}}</strong>\n        {{opt.subLabel}}\n      </td>\n    </tr>\n  </table>\n</div>\n\n\n<div class="panel panel-default">\n  <div class="panel-heading">\n    <strong>Filters</strong>\n\n    <div class="btn-group" dropdown ng-show="filterAttributes.length">\n      &mdash;\n      <a dropdown-toggle class="ng-link">add filter</a>\n      <ul class="dropdown-menu" role="menu">\n        <li ng-repeat="attr in filterAttributes">\n          <a ng-click="addFilter(attr)">\n            <strong>{{attr.label}}</strong>\n            {{attr.subLabel}}\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <table class="table table-panel">\n    <tbody ng-repeat="filter in filters">\n      <tr>\n        <td colspan="2">\n          <strong>{{filter.attr.label}}</strong>\n          {{filter.attr.subLabel}}\n        </td>\n        <td width="1%">\n          <span class="pull-right">\n            <a ng-click="removeFilter(filter)" class="ng-link">\n              <i class="fa fa-times"></i>\n            </a>\n          </span>\n        </td>\n      </tr>\n      <tr class="adjoined">\n        <td width="1%" class="middle">\n          is\n        </td>\n        <td width="90%">\n          <div ng-hide="filter.editMode">\n            {{filter.value}}\n          </div>\n          <div ng-show="filter.editMode">\n            <ui-select ng-model="filter.value" disable-search="false" on-select="setFilter(filter, $item, $model)">\n              <ui-select-match placeholder="Pick one...">{{$select.selected}}</ui-select-match>\n              <ui-select-choices repeat="v in filter.values | filter: $select.search track by $index">\n                 <div ng-bind="v"></div>\n              </ui-select-choices>\n            </ui-select>\n          </div>\n        </td>\n        <td class="middle">\n          <span class="pull-right">\n            <a ng-click="toggleEditFilter(filter)" class="ng-link">\n              <i class="fa fa-edit"></i>\n            </a>\n          </span>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n\n')}]),angular.module("angular-cubes-templates/treemap.html",[]).run(["$templateCache",function(a){a.put("angular-cubes-templates/treemap.html",'<div class="table-cubes" ng-hide="queryLoaded">\n  <div class="alert alert-info">\n    <strong>You have not selected any data.</strong> Please choose a breakdown for\n    your treemap.\n  </div>\n</div>\n\n<div class="alert alert-warning" ng-show="cutoffWarning">\n  <strong>Too many tiles.</strong> The breakdown you have selected contains many\n  different categories, only the {{cutoff}} biggest are shown.\n</div>\n\n<div class="treemap-cubes"></div>\n')}]),angular.module("angular-cubes-templates/workspace.html",[]).run(["$templateCache",function(a){a.put("angular-cubes-templates/workspace.html",'<cubes slicer="{{slicer}}" cube="{{cube}}" state="state">\n  <div class="row">\n    <div class="col-md-9">\n      <div ng-if="view == \'crosstab\'">\n        <cubes-crosstab></cubes-crosstab>\n      </div>\n      <div ng-if="view == \'facts\'">\n        <cubes-facts></cubes-facts>\n      </div>\n      <div ng-if="view == \'treemap\'">\n        <cubes-treemap></cubes-treemap>\n      </div>\n    </div>\n    <div class="col-md-3">\n      <div class="btn-group spaced" role="group">\n        <a class="btn btn-default"\n          ng-class="{\'active\': view == \'facts\'}"\n          ng-click="setView(\'facts\')">\n          <i class="fa fa-table"></i> Items\n        </a>\n        <a class="btn btn-default"\n          ng-class="{\'active\': view == \'crosstab\'}"\n          ng-click="setView(\'crosstab\')">\n          <i class="fa fa-cubes"></i> Pivot table\n        </a>\n        <a class="btn btn-default"\n          ng-class="{\'active\': view == \'treemap\'}"\n          ng-click="setView(\'treemap\')">\n          <i class="fa fa-th-large"></i> Treemap\n        </a>\n      </div>\n      <cubes-panel></cubes-panel>\n    </div>\n  </div>\n</cubes>\n')}]);