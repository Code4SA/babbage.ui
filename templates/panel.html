
<div class="panel panel-default" ng-repeat="axis in axes">
  <div class="panel-heading">
    <strong>{{axis.label}}</strong>

    <div class="btn-group" dropdown ng-show="axis.available.length">
      &mdash;
      <a dropdown-toggle class="ng-link">{{axis.addLabel}}</a>
      <ul class="dropdown-menu" role="menu">
        <li ng-repeat="opt in axis.available">
          <a ng-click="add(axis, opt.ref)">
            <strong>{{opt.label}}</strong>
            {{opt.subLabel}}
          </a>
        </li>
      </ul>
    </div>
  </div>
  <table class="table">
    <tr ng-repeat="opt in axis.active">
      <td colspan="2">
        <span class="pull-right">
          <a ng-click="remove(axis, opt.ref)" class="ng-link">
            <i class="fa fa-times"></i>
          </a>
        </span>
        <strong>{{opt.label}}</strong>
        {{opt.subLabel}}
      </td>
    </tr>
  </table>
</div>


<div class="panel panel-default">
  <div class="panel-heading">
    <strong>Filters</strong>

    <div class="btn-group" dropdown ng-show="filterAttributes.length">
      &mdash;
      <a dropdown-toggle class="ng-link">add filter</a>
      <ul class="dropdown-menu" role="menu">
        <li ng-repeat="attr in filterAttributes">
          <a ng-click="addFilter(attr)">
            <strong>{{attr.label}}</strong>
            {{attr.subLabel}}
          </a>
        </li>
      </ul>
    </div>
  </div>
  <table class="table table-panel">
    <tbody ng-repeat="filter in filters">
      <tr>
        <td colspan="2">
          <strong>{{filter.attr.label}}</strong>
          {{filter.attr.subLabel}}
        </td>
        <td width="1%">
          <span class="pull-right">
            <a ng-click="removeFilter(filter)" class="ng-link">
              <i class="fa fa-times"></i>
            </a>
          </span>
        </td>
      </tr>
      <tr class="adjoined">
        <td width="1%" class="middle">
          is
        </td>
        <td width="90%">
          <div ng-hide="filter.editMode">
            {{filter.value}}
          </div>
          <div ng-show="filter.editMode">
            <ui-select ng-model="filter.value" disable-search="false" on-select="setFilter(filter, $item, $model)">
              <ui-select-match placeholder="Pick one...">{{$select.selected}}</ui-select-match>
              <ui-select-choices repeat="v in filter.values | filter: $select.search track by $index">
                 <div ng-bind="v"></div>
              </ui-select-choices>
            </ui-select>
          </div>
        </td>
        <td class="middle">
          <span class="pull-right">
            <a ng-click="toggleEditFilter(filter)" class="ng-link">
              <i class="fa fa-edit"></i>
            </a>
          </span>
        </td>
      </tr>
    </tbody>
  </table>
</div>

